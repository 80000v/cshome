<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>{% block title %}长沙之家{% endblock %}</title>
        {% block stylesheets %}
            <link rel="stylesheet" href="{{ asset('css/app.min.css') }}">
            <link rel="stylesheet" href="{{ asset('css/font-awesome-4.7.0.min.css') }}">
        {% endblock %}
    </head>
    <body>
        {% block header %}
            <header class="site-header">
                <nav class="navbar navbar-toggleable-md navbar-light">
                    <div class="container">
                        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <a class="navbar-brand" href="{{ path('homepage') }}"><i class="fa fa-smile-o"></i> 长沙之家</a>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">

                            <ul class="navbar-nav mx-lg-4">
                                <li class="nav-item"><a class="nav-link" href="{{ path('homepage') }}">首页</a></li>
                            </ul>

                            <form class="navbar-search form-inline ml-lg-4 mr-auto" action="javascript:void(0)">
                                <div class="input-group">
                                    <input class="form-control" type="text" placeholder="搜索主题">
                                    <button class="btn btn-search" type="submit">搜索
                                    </button>
                                </div>
                            </form>

                            <ul class="navbar-nav ml-auto">
                                {% if app.user %}

                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle"
                                           href="{{ path('settings_index') }}"
                                           data-toggle="dropdown">
                                            {{ app.user.username }}
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a class="dropdown-item" href="{{ path('settings_index') }}">我的账号</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="{{ path('security_logout') }}">退出</a>
                                        </div>
                                    </li>
                                {% else %}
                                    <li class="nav-item">
                                        <a class="nav-link" href="{{ path('user_register') }}">没有账号？立即注册</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="{{ path('security_login') }}">登录</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>
        {% endblock %}
        <div class="container page-container">
            {{ include('default/_flash_messages.html.twig') }}

            {% block body %}
                <div class="wrapper">
                    <div class="content-main">
                        {% block main %}{% endblock %}
                    </div>
                    <div class="content-sidebar">
                        {% block sidebar %}{% endblock %}

                        <div class="sidebar-block sidebar-site-footer">
                            <ul>
                                <li><a href="{{ path('contact') }}">联系我们</a></li>
                                <li><a href="{{ path('terms') }}">服务协议</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            {% endblock %}
        </div>
        {% block javascripts %}
            <script src="{{ asset('js/app.min.js') }}"></script>
        {% endblock %}

        {% if 'prod' == app.environment %}
        <script>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?27e0778e3f07bb043b051b9759909ada";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
        {% endif %}
    </body>
</html>
